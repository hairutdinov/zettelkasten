202205020839
Tags: #компьютерные_сети

---

# Протокол DHCP Dynamic Host Configuration Protocol
Протокол динамической конфигурации хостов - автоматическое назначение IP адреса в сети
Для этого необходимо настроить и поддерживать DHCP сервер
Работает по модели клиент-сервер, где
- клиент - компьютер, который получает IP
- сервер - компьютер, который назначает IP адреса. Ведет таблицу выделенных IP адресов

Клиент и сервер обмениваются **сообщениями DHCP** в режиме запрос-ответ

![[Pasted image 20220502084407.png]]

При включении, у клиента нет информации о сети, в которой он находится. Шаги:
1. Узнать, где находится DHCP сервер. Он посылает DHCP DISCOVER сообщение на широковещательный MAC адрес (FF:FF:FF:FF:FF:FF)
2. Сервер, получивший D, посылает в ответ сообщение DHCP OFFER с IP адресом внутри сообщения
3. Клиент посылает DHCP REQUEST с тем же IP адресом
4. Сервер высылает сообщение DHCP ACK ([[ACK acknowledgment]])

Сообщения:
![[Pasted image 20220502084920.png]]

Почему обязательно нужен REQUEST - могут быть 2 DHCP сервера
![[Pasted image 20220502085046.png]]

Конфигурационные параметре передаются DHCP в качестве **опций**:
- Маска подсети
- Маршрутизатор по умолчанию
- Адреса DNS-серверов
- Адреса серверов времени
- Маршруты

Для того, чтобы решить проблему, когда сервер DHCP находится в другой подсети, отличной от сети, в которой находится компьютер, используется DHCP Relay^[специальная конфигурация маршрутизатора, которая позволяет передавать широковещательный трафик, но только тот, который относится к протоколу DHCP]
![[Pasted image 20220502092813.png]]

---
## Links