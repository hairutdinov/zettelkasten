202205021845
Tags: #

---

# Взаимодействие сетевого и канального уровня в OSI
На канальном ур-е - передача данных в одном сегменте
На сетевом - объединение сетей в одну крупную составную сеть

На канальном ур-е адресация MAC
На сетевом - IP

Каждый пакет содержит 2 адреса: MAC & IP

### Когда один сегмент сети:
![[Pasted image 20220502185127.png]]
1. Начинаем формировать пакет. В адрес отправителя включаем IP & MAC адрес отправителя. 
3. Мы знаем IP адрес получателя и включаем его в "адрес получателя", но не знаем его MAC адреса. Для этого мы используем протокол ARP и посылаем ARP запрос на широковещательный MAC адрес. Комп., который узнает свой IP адрес посылает ARP ответ со своим MAC и IP адресом.
4. Пакет готов для передачи по сети
5. Получатель в адреса отправителя вставляет свои IP & MAC, а в адрес получателя наш IP & MAC адрес. ARP запрос не нужен, потому что он уже знает его MAC (из отправленого пакета)

### Разные сети
1. то, что и "когда один сегмент"
2. в адрес получателя включаем его IP адрес
3. Нужно узнать MAC адрес, куда нужно передать пакет. 
4. Проверяем, находится ли получатель с нами в одной сети. Для этого берем адрес сети и проверям, подходит под эту сеть или нет. 
5. Если получатель в другой сети, мы не может передать ему пакет на прямую. Необходимо передать его маршрутизатору. 
6. Адрес маршр. комп. узнает с помощью таблицы маршр-ции
7.  После получения IP адреса маршр. мы с помощью ARP протокола определяем его MAC адрес. 
8.  Записываем его в MAC адрес получателя. 
9.  Передаем его на маршр-ор
10.  IP адреса получателя и отправителя остаются без изменений, MAC адрес отправителя - MAC маршр., MAC адрес получателя - MAC адрес комп. получателя (ARP). 
11.  ...

IP адреса пол. и отпр. остаются без изменений, а MAC адреса меняются

---
## Links
- [[Сетевой уровень модели OSI Network]]
- [[Канальный Уровень передачи данных модели OSI Data link]]