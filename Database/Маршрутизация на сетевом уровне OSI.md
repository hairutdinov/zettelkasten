202205011045
Tags: #

---

# Маршрутизация на сетевом уровне OSI
Поиск маршрута для пакета между сетями через маршрутизаторы

### Этапы маршрутизации
1. Изучение сети
	- Какие подсети есть
	- Какие маршрутизаторы
	- Как марш. объединены между собой
2. Продвижение пакетов на маршрутизаторе

![[Pasted image 20220501110029.png]]
На маршрутизатор D пришел пакет. 
Варианты действий маршрутизатора:
- Сеть, которой предназначен пакет, подключена к маршрутизатору. У маршр. D таких сетей 3. Маршрутизатор передает пакет в эту сеть
- Нужная сеть подключена к доугому маршрутизатору и мы знаем какой маршрутизатор нам нужен. Марш. D передает пакет следующему маршр., который в свою очередь передает его в нужную сеть. Такой маршр. называется **шлюзом**
- К нам пришел пакет для сети, маршрута к которой мы не знаем. В таком случае пакет отбрасывается. (в отличие от коммутатора, который бы разослал кадр на все порты)

Что нужно знать маршрутизатору, чтобы отправить пакет в сеть:
У него есть несколько интерфейсов, к которым подключены сети. Нужно определить в какой из этих интерфейсов отправить пакет. Далее определяем, что делать с пакетом: 1. передать пакет в эту сеть или 2. передать следующему маршрутизатору. Если передаем на маршрутизатор, нужно знать какой именно выбрать. 
Эта информ. хранится в *Таблице маршрутизации*
![[Pasted image 20220501111032.png]]

Что делать, если сеть, для которой пришел пакет находится не за одним маршрутизатором, а за несколькими?
	В таблицу маршрутизации мы все равно записываем только один шаг - адрес следующего маршрутизатора. Все что находится дальше, нас не интересует. След. маршр. знает маршрут до нужной нам сети. 
	
Когда есть 2 маршрута до сети, используется поле **метрика**^[число, характеризующее расстояние от одной сети до другой] в таблице маршрутизации. В этом отличие от кананльного уровня - в нем допускается только одно соединение. 

Метрика учитывает не только кол-во промежуточных маршрутизаторов, но и скорость каналов, загрузка. 

Откуда появляются записи в таблице маршрутизации:
- Статическая маршрутизация
	Настраиваются вручную
- Динамическая маршрутизация
	Марш-ты настраиваются динамически. Маршрутизаторы изучают сеть с помощью протоколов маршрутизации RIP, OSPF, BGP ... Преимущства - изменения в сети отмечаются автоматически в таблице. 
	
	
Когда не знаем, куда отправить пакет, в таблице маршрутизации назначается маршрут по умолчанию - маршрутизатор, на который отправляются пакеты для неизвестных сетей. 
Обозначение:
- 0.0.0.0, маска 0.0.0.0
- default

---
## Links
- [[Протокол IP Internet Protocol]]